try{window.performance.mark("async-connect-modules.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-connect-modules"],{"./node_modules/@atlassian/mpac-fetch-wrapper/node_modules/whatwg-fetch/fetch.js":function(t,n){!function(t){"use strict";if(!t.fetch){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in t,o="ArrayBuffer"in t;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=function(e){return e&&DataView.prototype.isPrototypeOf(e)},c=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};v.prototype.append=function(e,t){e=d(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},v.prototype.delete=function(e){delete this.map[d(e)]
},v.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},v.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},v.prototype.set=function(e,t){this.map[d(e)]=f(t)},v.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},v.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),m(e)},v.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),m(e)},v.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),m(e)},r&&(v.prototype[Symbol.iterator]=v.prototype.entries);var l=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:0,
statusText:""});return e.type="error",e};var p=[301,302,303,307,308];A.redirect=function(e,t){if(-1===p.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})},t.Headers=v,t.Request=E,t.Response=A,t.fetch=function(e,t){return new Promise((function(n,r){var a=new E(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:S(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new A(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(a.method,a.url,!0),"include"===a.credentials&&(o.withCredentials=!0),"responseType"in o&&i&&(o.responseType="blob"),a.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),o.send(void 0===a._bodyInit?null:a._bodyInit)}))},t.fetch.polyfill=!0}function d(e){
if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function m(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function v(e){this.map={},e instanceof v?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function k(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),
t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(i&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(a&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(n&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&i&&u(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!c(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=y(this);if(e)return e
;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=h(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}
function E(e,t){var n=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new v(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new v(t.headers)),this.method=function(e){var t=e.toUpperCase();return l.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function O(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e){var t=new v
;return e.split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function A(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new v(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},"./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js":function(e,t){e.exports=function(e,t,n,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a},e.exports.default=e.exports,e.exports.__esModule=!0},
"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":function(e,t){e.exports=function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},
"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/@babel/runtime/helpers/slicedToArray.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),i=n("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),a=n("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),o=n("./node_modules/@babel/runtime/helpers/nonIterableRest.js");e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},"./node_modules/ky/index.js":function(e,t,n){"use strict";(function(e){
function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*! MIT License Â© Sindre Sorhus */const a={},o=t=>"undefined"!=typeof self&&self&&t in self?self:"undefined"!=typeof window&&window&&t in window?window:void 0!==e&&e&&t in e?e:"undefined"!=typeof globalThis&&globalThis?globalThis:void 0,s=["Headers","Request","Response","ReadableStream","fetch","AbortController","FormData"];for(const t of s)Object.defineProperty(a,t,{get(){const e=o(t),n=e&&e[t];return"function"==typeof n?n.bind(e):n}});const u=e=>null!==e&&"object"==typeof e,c="function"==typeof a.AbortController,l="function"==typeof a.ReadableStream,p=(...e)=>{let t={};for(const n of e)if(Array.isArray(n))Array.isArray(t)||(t=[]),t=[...t,...n];else if(u(n))for(let[e,i]of Object.entries(n))u(i)&&Reflect.has(t,e)&&(i=p(t[e],i)),t=r(r({},t),{},{[e]:i});return t},d=["get","post","put","patch","head","delete"],f={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},m=[413,429,503],v=Symbol("stop");class y extends Error{constructor(e){
super(e.statusText),this.name="HTTPError",this.response=e}}class h extends Error{constructor(){super("Request timed out"),this.name="TimeoutError"}}const k=e=>new Promise((t=>setTimeout(t,e))),g=e=>d.includes(e)?e.toUpperCase():e,b={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:m},E=(e={})=>{if("number"==typeof e)return r(r({},b),{},{limit:e});if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return r(r(r({},b),e),{},{afterStatusCodes:m})},O=2147483647;class S{constructor(e,t={}){if(this._retryCount=0,this._input=e,this._options=r(r({credentials:this._input.credentials||"same-origin"},t),{},{hooks:p({beforeRequest:[],beforeRetry:[],afterResponse:[]},t.hooks),method:g(t.method||this._input.method),prefixUrl:String(t.prefixUrl||""),retry:E(t.retry),
throwHttpErrors:!1!==t.throwHttpErrors,timeout:void 0===t.timeout?1e4:t.timeout}),"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof a.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(c&&(this.abortController=new a.AbortController,this._options.signal&&(this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal)),this.request=new a.Request(this._input,this._options),this._options.searchParams){const e=new URL(this.request.url);e.search=new URLSearchParams(this._options.searchParams),this.request=new a.Request(new a.Request(e,this.request),this._options)}
void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new a.Request(this.request,{body:this._options.body}));const n=async()=>{if(this._options.timeout>O)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await k(1);let e=await this._fetch();for(const t of this._options.hooks.afterResponse){const n=await t(this.request,this._options,e.clone());n instanceof a.Response&&(e=n)}if(!e.ok&&this._options.throwHttpErrors)throw new y(e);if(this._options.onDownloadProgress){if("function"!=typeof this._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!l)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(e.clone(),this._options.onDownloadProgress)}return e},i=this._options.retry.methods.includes(this.request.method.toLowerCase())?this._retry(n):n()
;for(const[r,a]of Object.entries(f))i[r]=async()=>{this.request.headers.set("accept",this.request.headers.get("accept")||a);const e=(await i).clone();return"json"===r&&204===e.status?"":e[r]()};return i}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof h)){if(e instanceof y){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const t=e.response.headers.get("Retry-After");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=Number(t);return Number.isNaN(e)?e=Date.parse(t)-Date.now():e*=1e3,void 0!==this._options.retry.maxRetryAfter&&e>this._options.retry.maxRetryAfter?0:e}if(413===e.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}async _retry(e){try{return await e()}catch(t){const n=Math.min(this._calculateRetryDelay(t),O);if(0!==n&&this._retryCount>0){await k(n);for(const e of this._options.hooks.beforeRetry){
if(await e(this.request,this._options,t,this._retryCount)===v)return}return this._retry(e)}if(this._options.throwHttpErrors)throw t}}async _fetch(){for(const e of this._options.hooks.beforeRequest){const t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}return!1===this._options.timeout?a.fetch(this.request):((e,t,n)=>new Promise(((r,i)=>{const a=setTimeout((()=>{n&&n.abort(),i(new h)}),t);e.then(r).catch(i).then((()=>{clearTimeout(a)}))})))(a.fetch(this.request),this._options.timeout,this.abortController)}_stream(e,t){const n=Number(e.headers.get("content-length"))||0;let r=0;return new a.Response(new a.ReadableStream({start(i){const a=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array),async function e(){const{done:o,value:s}=await a.read();if(o)i.close();else{if(t){r+=s.byteLength;t({percent:0===n?0:r/n,transferredBytes:r,totalBytes:n},s)}i.enqueue(s),e()}}()}}))}}const A=(...e)=>{
for(const t of e)if((!u(t)||Array.isArray(t))&&void 0!==t)throw new TypeError("The `options` argument must be an object");return p({},...e)},N=e=>{const t=(t,n)=>new S(t,A(e,n));for(const n of d)t[n]=(t,r)=>new S(t,A(e,r,{method:n}));return t.create=e=>N(A(e)),t.extend=t=>N(A(e,t)),t.stop=v,t};t.a=N()}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/nanoid/index.browser.js":function(e,t,n){for(var r=self.crypto||self.msCrypto,i="-_",a=36;a--;)i+=a.toString(36);for(a=36;a---10;)i+=a.toString(36).toUpperCase();e.exports=function(e){var t="",n=r.getRandomValues(new Uint8Array(e||21));for(a=e||21;a--;)t+=i[63&n[a]];return t}},"./src/entry/connect-modules.js":function(t,n,r){"use strict";r.r(n)
;var i=r("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=r.n(i),o=r("./node_modules/@babel/runtime/regenerator/index.js"),s=r.n(o),u=r("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),c=r.n(u),l=r("./node_modules/@babel/runtime/helpers/slicedToArray.js"),p=r.n(l),d=r("./node_modules/@babel/runtime/helpers/classCallCheck.js"),f=r.n(d),m=r("./node_modules/@babel/runtime/helpers/createClass.js"),v=r.n(m),y=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js"),h=r.n(y),k=r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),g=r.n(k),b=r("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),E=r.n(b),O=r("./node_modules/nanoid/index.browser.js"),S=r.n(O);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e,t){var n=function(e,t){return new Function("return function (call) { \n         return function ".concat(e,"() { \n           return call(this, arguments) \n         }; \n      };"))()(Function.apply.bind(t))}(e,(function(r){var i=this,a=t?t(r):r,o=a.code,s=a.message,u=a.meta,c=a.source,l=E()(a,["code","message","meta","source"]);this.code=o,this.message=s,this.id=S()(9),this.type=e,this.source=c,this.meta=N(N({},u),l),this.toJSON=function(){return N({id:i.id,code:i.code,type:i.type,message:i.message,meta:i.meta},i.source&&{source:i.source.toJSON?i.source.toJSON():i.source.message?i.source.message:i.source})},this.toString=JSON.stringify(this.toJSON()),
Object.prototype.hasOwnProperty.call(Error,"captureStackTrace")?Error.captureStackTrace(this,n):this.stack=new Error(s).stack}));return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n.prototype,Error.prototype):n.prototype=Object.create(Error.prototype,{constructor:{value:n}}),n},_=I("AppInstallError",(function(e){var t=e.code,n=e.message,r=e.addon;return{code:t,message:n,source:e.source,meta:{addon:r}}})),w=function(e){return I(e,(function(e){var t=e.source,n=e.appKey;return{code:"FetchError",message:"Failed to fetch app details for ".concat(n),source:t,meta:{appKey:n}}}))};r("./node_modules/@atlassian/mpac-fetch-wrapper/node_modules/whatwg-fetch/fetch.js");function P(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function T(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){var n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}
return!(!P(e)||!e.equals(t))}function C(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){var t=e.valueOf();if(t!==e)return C(t)}return P(e)?e.hashCode():function(e){var t=0;if(null==e||0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(String(e))}var D=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){
if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},F=(function(e){function t(e){D(this,t);var n="",r=!0,i=!1,a=void 0;try{for(var o,s=e.slice(0,2)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n+=", "+(u instanceof Error?u.name+"("+u.message+")":""+u)}}catch(p){i=!0,a=p}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}n=n.slice(2),e.length>2&&(n+=", ...");var c=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));c.name="CompositeError",c.errorsRef=e;var l=c;return l.constructor=t,l.__proto__=t.prototype,c}R(t,e),j(t,[{key:"errors",value:function(){return this.errorsRef.slice()}}])}(Error),function(e){function t(e){D(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="DummyError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}R(t,e)}(Error),function(e){function t(e){D(this,t)
;var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="NoSuchElementError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}return R(t,e),t}(Error));(function(e){function t(e){D(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="IllegalInheritanceError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}R(t,e)})(Error),function(e){function t(e){D(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="IllegalStateError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}R(t,e)}(Error),function(e){function t(e){D(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="IllegalArgumentError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}R(t,e)}(Error),function(e){function t(e){D(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="NotImplementedError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}R(t,e)}(Error),
function(e){function t(e){D(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="TimeoutError";var r=n;return r.constructor=t,r.__proto__=t.prototype,n}R(t,e)}(Error);function U(e){return function(){var t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function L(e,t,n){var r=e,i=r.prototype,a="fantasy-land/",o="equals",s=a+o,u="map",c=a+u,l="ap",p=a+l,d=a+"of",f="chain",m=a+f,v="chainRec",y=a+v;i.equals?i[s]=i.equals:n&&(i[s]=U(n.equals)),i.map?i[c]=i.map:t&&(i[c]=U(t.map)),i.ap?i[p]=i.ap:t&&(i[p]=U(t.ap)),r.pure?r[d]=r.pure:t&&(r[d]=t.of),i.chain?i[m]=i.chain:t&&(i[m]=U(t.chain)),r.chainRec?r[y]=r.chainRec:t&&(r[y]=t.chainRec)}Object.freeze({convertToMethod:U,fantasyLandRegister:L});var M=function(){function e(t,n){D(this,e),this._isRight="right"===n,this.value=t}return j(e,[{key:"isLeft",value:function(){return!this._isRight}},{key:"isRight",value:function(){return this._isRight}},{key:"contains",value:function(e){
return this._isRight&&T(this.value,e)}},{key:"exists",value:function(e){return this._isRight&&e(this.value)}},{key:"filterOrElse",value:function(e,t){return this._isRight?e(this.value)?this:V(t()):this}},{key:"flatMap",value:function(e){return this._isRight?e(this.value):this}},{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var t=this;return e.flatMap((function(e){return t.map(e)}))}},{key:"fold",value:function(e,t){return this._isRight?t(this.value):e(this.value)}},{key:"forAll",value:function(e){return!this._isRight||e(this.value)}},{key:"get",value:function(){if(this._isRight)return this.value;throw new F("left.get()")}},{key:"getOrElse",value:function(e){return this._isRight?this.value:e}},{key:"getOrElseL",value:function(e){return this._isRight?this.value:e()}},{key:"map",value:function(e){return this._isRight?K(e(this.value)):this}},{key:"forEach",value:function(e){this._isRight&&e(this.value)}},{key:"swap",value:function(){
return this._isRight?V(this.value):K(this.value)}},{key:"toOption",value:function(){return this._isRight?W(this.value):H}},{key:"equals",value:function(e){return null!=e&&(this._isRight===e._isRight&&T(this.value,e.value))}},{key:"hashCode",value:function(){return this._isRight?C(this.value)<<2:C(this.value)<<3}}],[{key:"pure",value:function(e){return new G(e)}},{key:"left",value:function(e){return V(e)}},{key:"right",value:function(e){return K(e)}},{key:"map2",value:function(e,t,n){return e.isLeft()?e:t.isLeft()?t:K(n(e.value,t.value))}},{key:"map3",value:function(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:K(r(e.value,t.value,n.value))}},{key:"map4",value:function(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:K(i(e.value,t.value,n.value,r.value))}},{key:"map5",value:function(e,t,n,r,i,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:K(a(e.value,t.value,n.value,r.value,i.value))}},{key:"map6",value:function(e,t,n,r,i,a,o){
return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:a.isLeft()?a:K(o(e.value,t.value,n.value,r.value,i.value,a.value))}},{key:"tailRecM",value:function(e,t){for(var n=e;;){var r=t(n);if(!r.isRight())return r;var i=r.value;if(i.isRight())return K(i.value);n=i.value}}}]),e}(),B=function(e){function t(e){return D(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"left"))}return R(t,e),t}(M);function V(e){return new B(e)}var G=function(e){function t(e){return D(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"right"))}return R(t,e),t}(M);function K(e){return new G(e)}var q={equals:function(e,t){return e?e.equals(t):!t},map:function(e,t){return t.map(e)},ap:function(e,t){return t.ap(e)},of:M.pure,chain:function(e,t){return t.flatMap(e)},chainRec:function(e,t){return M.tailRecM(t,(function(t){return e(M.left,M.right,t)}))}};L(M,q,q);var z=function(){function e(t,n){D(this,e),this._isEmpty=null!=n?n:null==t,this.value=t}return j(e,[{
key:"get",value:function(){if(!this._isEmpty)return this.value;throw new F("Option.get")}},{key:"getOrElse",value:function(e){return this._isEmpty?e:this.value}},{key:"orNull",value:function(){return this._isEmpty?null:this.value}},{key:"orUndefined",value:function(){return this._isEmpty?void 0:this.value}},{key:"getOrElseL",value:function(e){return this._isEmpty?e():this.value}},{key:"orElse",value:function(e){return this._isEmpty?e:this}},{key:"orElseL",value:function(e){return this._isEmpty?e():this}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"nonEmpty",value:function(){return!this._isEmpty}},{key:"map",value:function(e){return this._isEmpty?H:W(e(this.value))}},{key:"flatMap",value:function(e){return this._isEmpty?H:e(this.value)}},{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var t=this;return e.flatMap((function(e){return t.map(e)}))}},{key:"filter",value:function(e){return this._isEmpty||!e(this.value)?H:this}},{key:"fold",
value:function(e,t){return this._isEmpty?e():t(this.value)}},{key:"contains",value:function(e){return!this._isEmpty&&T(this.value,e)}},{key:"exists",value:function(e){return!this._isEmpty&&e(this.value)}},{key:"forAll",value:function(e){return this._isEmpty||e(this.value)}},{key:"forEach",value:function(e){this._isEmpty||e(this.value)}},{key:"equals",value:function(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?T(this.value,e.value):this.isEmpty()&&e.isEmpty())}},{key:"hashCode",value:function(){return this._isEmpty?2433880:null==this.value?9735524:C(this.value)<<2}}],[{key:"of",value:function(e){return null!=e?W(e):H}},{key:"some",value:function(t){return new e(t,!1)}},{key:"none",value:function(){return H}},{key:"empty",value:function(){return H}},{key:"pure",value:function(e){return W(e)}},{key:"map2",value:function(e,t,n){return e.nonEmpty()&&t.nonEmpty()?W(n(e.value,t.value)):H}},{key:"map3",value:function(e,t,n,r){
return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?W(r(e.value,t.value,n.value)):H}},{key:"map4",value:function(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?W(i(e.value,t.value,n.value,r.value)):H}},{key:"map5",value:function(e,t,n,r,i,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?W(a(e.value,t.value,n.value,r.value,i.value)):H}},{key:"map6",value:function(e,t,n,r,i,a,o){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?W(o(e.value,t.value,n.value,r.value,i.value,a.value)):H}},{key:"tailRecM",value:function(e,t){for(var n=e;;){var r=t(n);if(!r.nonEmpty())return H;var i=r.value;if(i.isRight())return W(i.value);n=i.value}}}]),e}(),J=function(e){function t(e){return D(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,!1))}return R(t,e),t}(z);function W(e){return new J(e)}var H=new(function(e){function t(){return D(this,t),
x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,void 0,!0))}return R(t,e),t}(z)),$={equals:function(e,t){return e?e.equals(t):!t},map:function(e,t){return t.map(e)},ap:function(e,t){return t.ap(e)},of:z.pure,chain:function(e,t){return t.flatMap(e)},chainRec:function(e,t){return z.tailRecM(t,(function(t){return e(M.left,M.right,t)}))}};L(z,$,$);var Y=function(){function t(e,n){D(this,t),this._isSuccess="success"===n,this.value=e}return j(t,[{key:"isSuccess",value:function(){return this._isSuccess}},{key:"isFailure",value:function(){return!this._isSuccess}},{key:"get",value:function(){if(!this._isSuccess)throw this.value;return this.value}},{key:"getOrElse",value:function(e){return this._isSuccess?this.value:e}},{key:"getOrElseL",value:function(e){return this._isSuccess?this.value:e()}},{key:"orNull",value:function(){return this._isSuccess?this.value:null}},{key:"orUndefined",value:function(){return this._isSuccess?this.value:void 0}},{key:"orElse",value:function(e){
return this._isSuccess?this:e}},{key:"orElseL",value:function(e){return this._isSuccess?this:e()}},{key:"failed",value:function(){return this._isSuccess?ee(new F("try.failed()")):X(this.value)}},{key:"fold",value:function(e,t){return this._isSuccess?t(this.value):e(this.value)}},{key:"filter",value:function(t){if(!this._isSuccess)return this;try{return t(this.value)?this:ee(new F("Predicate does not hold for "+this.value))}catch(e){return ee(e)}}},{key:"flatMap",value:function(t){if(!this._isSuccess)return this;try{return t(this.value)}catch(e){return ee(e)}}},{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var t=this;return e.flatMap((function(e){return t.map(e)}))}},{key:"map",value:function(e){var n=this;return this._isSuccess?t.of((function(){return e(n.value)})):this}},{key:"forEach",value:function(e){this._isSuccess&&e(this.value)}},{key:"recover",value:function(e){var n=this;return this._isSuccess?this:t.of((function(){return e(n.value)}))}},{
key:"recoverWith",value:function(t){try{return this._isSuccess?this:t(this.value)}catch(e){return ee(e)}}},{key:"toOption",value:function(){return this._isSuccess?W(this.value):H}},{key:"toEither",value:function(){return this._isSuccess?K(this.value):V(this.value)}},{key:"equals",value:function(e){return null!=e&&(this._isSuccess?e._isSuccess&&T(this.value,e.value):!e._isSuccess&&T(this.value,e.value))}},{key:"hashCode",value:function(){return this._isSuccess,C(this.value)}}],[{key:"of",value:function(t){try{return X(t())}catch(e){return ee(e)}}},{key:"pure",value:function(e){return t.success(e)}},{key:"unit",value:function(){return ne}},{key:"success",value:function(e){return X(e)}},{key:"failure",value:function(e){return ee(e)}},{key:"raise",value:function(e){return ee(e)}},{key:"map2",value:function(t,n,r){if(t.isFailure())return t;if(n.isFailure())return n;try{return X(r(t.value,n.value))}catch(e){return ee(e)}}},{key:"map3",value:function(t,n,r,i){if(t.isFailure())return t
;if(n.isFailure())return n;if(r.isFailure())return r;try{return X(i(t.value,n.value,r.value))}catch(e){return ee(e)}}},{key:"map4",value:function(t,n,r,i,a){if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return X(a(t.value,n.value,r.value,i.value))}catch(e){return ee(e)}}},{key:"map5",value:function(t,n,r,i,a,o){if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(a.isFailure())return a;try{return X(o(t.value,n.value,r.value,i.value,a.value))}catch(e){return ee(e)}}},{key:"map6",value:function(t,n,r,i,a,o,s){if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(a.isFailure())return a;if(o.isFailure())return o;try{return X(s(t.value,n.value,r.value,i.value,a.value,o.value))}catch(e){return ee(e)}}},{key:"tailRecM",value:function(t,n){for(var r=t;;)try{var i=n(r);if(i.isFailure())return i;var a=i.get()
;if(a.isRight())return X(a.value);r=a.value}catch(e){return ee(e)}}}]),t}(),Q=function(e){function t(e){return D(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"success"))}return R(t,e),t}(Y);function X(e){return new Q(e)}var Z=function(e){function t(e){return D(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"failure"))}return R(t,e),t}(Y);function ee(e){return new Z(e)}var te={equals:function(e,t){return e?e.equals(t):!t},map:function(e,t){return t.map(e)},ap:function(e,t){return t.ap(e)},of:Y.pure,chain:function(e,t){return t.flatMap(e)},chainRec:function(e,t){return Y.tailRecM(t,(function(t){return e(M.left,M.right,t)}))}};L(Y,te,te);var ne=X(void 0);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.retries,r=t.accept,i=t.retryDelay,a=E()(t,["retries","accept","retryDelay"]),o=z.of(n).getOrElse(0),s=z.of(r).getOrElse((function(e){return Promise.resolve()})),u=z.of(i).getOrElse(0);return new Promise((function(t,n){!function r(i){fetch(e,a).then((function(e){return s(e.clone()).then((function(n){return t(e)}))})).catch((function(t){i>0?setTimeout((function(){r(--i)}),u):n({url:e,error:t,status:t.status||"unknown"})}))}(o)}))}var oe=function(e){return!0===e.ok?Promise.resolve():Promise.reject(e)};function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
;return ae(e,ie(ie({},t),{},{accept:function(e){return oe(e).then((function(){return z.of(t.accept).getOrElse((function(e){return Promise.resolve()}))(e)}))}})).catch((function(e){return Promise.reject(e)}))}var ue=r("./node_modules/url-template/lib/url-template.js"),ce=r.n(ue),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ce.a.parse("".concat(e,"/plugins/{appKey}/overview"))},pe={context:!1,accessToken:!1,enabled:!1},de="application/vnd.atl.plugins.remote.install+json",fe="application/vnd.atl.plugins.install.complete+json";var me={unexpectedCase:function(e){return new Error("Unexpected case ".concat(e))}};function ve(e){return e}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
;t%2?ye(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=function(e){return{name:"jira"===e.product?"Jira":"Confluence",type:"application",id:"ari:cloud:".concat(e.product,":").concat(e.cloudId,":/")}};function ge(e,t,n){return n.value.returnsPromise=!0,n.enumerable=!0,n}function be(e,t,n){var r=n.value.name;return n.value=function(){return Promise.reject("Marketplace SPI function [".concat(r,"] not implemented"))},n}function Ee(e,t,n){var r=n.value;return n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[t.length-1]._context.extension.addon_key.match(/com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g)?r.apply(this,t):Promise.reject("Emcee Internal API")},n}function Oe(e){
var t={},n=Object.getPrototypeOf(e);return Object.keys(n).forEach((function(r){t[r]=n[r].bind(e),t[r].returnsPromise=n[r].returnsPromise})),t}function Se(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=g()(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se("".concat(t,"/rest/plugins/1.0/upm-token"),{method:"HEAD",credentials:Ve(t)});case 2:return n=e.sent,e.abrupt("return",n.headers.get("upm-token"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t,n){return Ie.apply(this,arguments)}function Ie(){return(Ie=g()(s.a.mark((function e(t,n,r){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:"POST",credentials:Ve(t),headers:new window.Headers({"content-type":de})},e.next=3,se("".concat(t,"/rest/plugins/1.0/apps/install-subscribe?addonKey=").concat(r,"&token=").concat(n),i);case 3:return e.abrupt("return",e.sent.json());case 4:case"end":
return e.stop()}}),e)})))).apply(this,arguments)}var _e=function(e){return function(t,n,r){if(e.key)return t(e);if(e.url)return n(e);if(e.ari)return r(e);throw new Error("Invalid identifier")}},we=function(e){return function(t,n){return e.details.ecosystemCloudAppId?n(e):t(e)}},Pe=function(e,t){return 60*e*1e3/t};function Te(e,t,n){return Ce.apply(this,arguments)}function Ce(){return(Ce=g()(s.a.mark((function e(t,n,r){var i,a,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={retries:Pe(4,r),retryDelay:r,credentials:Ve(t),accept:function(e){return e.json().then((function(e){var t;return null!==(t=e.status)&&void 0!==t&&t.done?Promise.resolve():Promise.reject(new Error("Request pending"))}))}},e.next=3,se(n,a);case 3:return o=e.sent,e.next=6,o.json();case 6:if(u=e.sent,!(-1!==(null===(i=o.headers.get("content-type"))||void 0===i?void 0:i.indexOf(fe)))){e.next=12;break}return e.abrupt("return",u);case 12:throw u.status;case 13:case"end":return e.stop()}}),e)
})))).apply(this,arguments)}var De=function(e,t){var n,r=e.version,i=e.partner,a=function(e){var t=e.mpacBaseUrl,n=e.mpacCdnBaseUrl,r=e.atlassianCommunityBaseUrl;return{appDetails:le(t),appPricingDetails:ce.a.parse(t+"/plugins/{appKey}/pricing"),mediaFile:ce.a.parse(n+"/files/{imageId}"),appHostingDetails:ce.a.parse(t+"/plugins/{appKey}/{hosting}/overview"),appIcon:ce.a.parse(t+"/plugins/{appKey}/icon"),appRating:ce.a.parse(t+"/plugins/{appKey}/reviews"),appManageLink:ce.a.parse(t+"/manage/apps/{appId}"),appShortLink:ce.a.parse(t+"/{appId}"),managePrivateListing:ce.a.parse(t+"/manage/apps/{appId}/private-listings"),partnerDetails:ce.a.parse(t+"/vendors/{id}/{slug}"),appCreateCommunityQuestionLink:ce.a.parse("".concat(r,"/t5/custom/page/page-id/create-post-step-1?add-tags=atlassian-marketplace,addon-{appKey},{hosting}")),appVersionHistory:ce.a.parse(t+"/apps/{appId}/{appSlug}/version-history"),artifactDownload:ce.a.parse(t+"/download/apps/{appId}/version/{buildNumber}"),
descriptorDownload:ce.a.parse(t+"/download/apps/{appId}/version/{buildNumber}/descriptor"),appListing:ce.a.parse("".concat(t,"/apps/{appId}/{slug}?hosting={hosting}&tab={tab}"))}}({mpacBaseUrl:t.mpacBaseUrl,mpacCdnBaseUrl:t.mpacCdnBaseUrl,atlassianCommunityBaseUrl:t.atlassianCommunityBaseUrl});return he(he(he(he(he(he(he({key:e.appKey,name:e.name,origin:"marketplace",description:e.tagline||""},Fe("version",null==r?void 0:r.version)),Fe("vendor",null==i?void 0:i.name)),Fe("vendorLink",i?a.partnerDetails.expand({id:i.id,slug:i.slug}):void 0)),Fe("icon",e.logo?a.mediaFile.expand({imageId:(null===(n=e.logo.highResolution)||void 0===n?void 0:n.id)||e.logo.original.id}):void 0)),Fe("privacyPolicy",e.privacyPolicyUrl)),Fe("eula",null==r?void 0:r.endUserLicenseAgreementUrl)),{},{vendorType:"ATLASSIAN_INTERNAL"===(null==i?void 0:i.partnerType)?"internal":"thirdParty",metadata:void 0})},je=function(e){var t,n=((null===(t=e.version)||void 0===t?void 0:t.deployment)||{}).scopes
;return n?n.map((function(e){return e.id})):[]},Re=function(e){var t,n,r;return he(he(he(he(he(he(he({key:e.key,name:e.name,origin:"marketplace",description:e.summary,version:e.version},Fe("vendor",null===(t=e.vendor)||void 0===t?void 0:t.name)),Fe("vendorLink",null===(n=e.vendor)||void 0===n?void 0:n.marketplaceLink)),Fe("vendorType",e.vendor?e.vendor.isAtlassian?"internal":"thirdParty":void 0)),Fe("icon",null===(r=e.logo)||void 0===r?void 0:r.link)),Fe("privacyPolicy",e.links.privacy)),Fe("eula",e.links.eula)),{},{metadata:void 0})},xe=function(e){return{details:Re(e),preinstalled:e.preinstalled,scopes:(e.permissions||[]).map((function(e){return e.key})),metadata:void 0}};function Fe(e,t){return null!=t?a()({},e,t):{}}function Ue(e,t,n,r){var i,a,o,s=null===(i=t.links)||void 0===i?void 0:i.postInstall,u=null===(a=t.links)||void 0===a?void 0:a.configure,c=null===(o=t.links)||void 0===o?void 0:o.manage;return Be(n,e).map((function(t){return function(e,t,n,r,i,a){return he(he(he(he({
details:De(e,t),scopes:je(e),enabled:!0,latestVersion:!0,installationId:e.appKey},Fe("getStartedUrl",n)),Fe("configureUrl",r)),Fe("manageAppUrl",i)),{},{paymentModel:a,installTime:new Date,authType:{type:"2LO"},metadata:void 0})}(e,r,s,u,c,t)}))}var Le={type:"free"},Me=function(e){return{type:"paid",licenseType:e}},Be=function(e,t){var n,r=null===(n=t.version)||void 0===n?void 0:n.paymentModel;return r?function(e){return function(t,n,r){switch(e){case"PAID_VIA_ATLASSIAN":return n();case"FREE":return t();case"PAID_VIA_PARTNER":return r();default:throw me.unexpectedCase(e)}}}(r)((function(){return M.right(Le)}),(function(){var t,n,r,i,a=null===(t=e.licenseDetails)||void 0===t?void 0:t.evaluation,o=null===(n=e.licenseDetails)||void 0===n?void 0:n.autoRenewal,s=null===(r=e.licenseDetails)||void 0===r?void 0:r.expiryDate;return null!=a&&null!=o?a?function(e,t){return null!=e?M.right({type:"evaluation",expiry:e,isAutoRenewal:t}):M.left("Unable to get Expiry date for evaluation license")
}(s,o).map(Me):function(e,t){return t?M.right({type:"subscription",renewalType:{isAutoRenewal:!0}}):null!=e?M.right({type:"subscription",renewalType:{isAutoRenewal:!1,endDate:e}}):M.left("Unable to get end date for subscription license")}(null===(i=e.licenseDetails)||void 0===i?void 0:i.subscriptionEndDate,o).map(Me):M.left("Unable to get subscription information from UPM")}),(function(){return M.left("Cannot get subscription information for a PvV app")})):M.left("Unable to get payment model from marketplace")};function Ve(e){return""===e?"same-origin":"include"}var Ge=function(e,t){return e.reduce((function(e,n){return e[t(n)]=n,e}),{})},Ke={mpacBaseUrl:"https://marketplace.atlassian.com",mpacCdnBaseUrl:"https://marketplace-cdn.atlassian.com",atlassianCommunityBaseUrl:"https://community.stg.atlassian.com",ecosystemCloudEnvKey:"production"},qe={mpacBaseUrl:"https://marketplace.stg.internal.atlassian.com",mpacCdnBaseUrl:"https://marketplace.stg.internal.atlassian.com",
atlassianCommunityBaseUrl:"https://community.stg.atlassian.com",ecosystemCloudEnvKey:"production"},ze={mpacBaseUrl:"https://marketplace.stg.internal.atlassian.com",mpacCdnBaseUrl:"https://marketplace.stg.internal.atlassian.com",atlassianCommunityBaseUrl:"https://community.stg.atlassian.com",ecosystemCloudEnvKey:"production"},Je=function(e){switch(e.environment){case"prod":return Ke;case"staging":return qe;case"local":return ze;default:return console.error("Unable to configure marketplace env: "+e.environment),Ke}},We="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e){return Ye(e,[])}function Ye(e,t){switch(He(e)){case"string":return JSON.stringify(e);case"function":
return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(We)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==r){var i=r.call(e);if(i!==e)return"string"==typeof i?i:Ye(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],a=0;a<n;++a)i.push(Ye(e[a],t));1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items"));return"["+i.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]"
;return"{ "+n.map((function(n){return n+": "+Ye(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function Qe(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,We&&(e.prototype[We]=t)}function Xe(e){return null!=e&&"string"==typeof e.kind}Qe(function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}()),Qe(function(){function e(e,t,n,r,i,a,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=o,this.prev=a,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}());var Ze={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],
VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],
InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},et=Object.freeze({});function tt(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter
;if("function"==typeof i)return i}else{var a=n?e.leave:e.enter;if(a){if("function"==typeof a)return a;var o=a[t];if("function"==typeof o)return o}}}function nt(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ze,r=void 0,i=Array.isArray(e),a=[e],o=-1,s=[],u=void 0,c=void 0,l=void 0,p=[],d=[],f=e;do{var m=++o===a.length,v=m&&0!==s.length;if(m){if(c=0===d.length?void 0:p[p.length-1],u=l,l=d.pop(),v){if(i)u=u.slice();else{for(var y={},h=0,k=Object.keys(u);h<k.length;h++){var g=k[h];y[g]=u[g]}u=y}for(var b=0,E=0;E<s.length;E++){var O=s[E][0],S=s[E][1];i&&(O-=b),i&&null===S?(u.splice(O,1),b++):u[O]=S}}o=r.index,a=r.keys,s=r.edits,i=r.inArray,r=r.prev}else{if(c=l?i?o:a[o]:void 0,null==(u=l?l[c]:f))continue;l&&p.push(c)}var A,N=void 0;if(!Array.isArray(u)){if(!Xe(u))throw new Error("Invalid AST Node: ".concat($e(u),"."));var I=tt(t,u.kind,m);if(I){if((N=I.call(t,u,c,l,p,d))===et)break;if(!1===N){if(!m){p.pop();continue}}else if(void 0!==N&&(s.push([c,N]),
!m)){if(!Xe(N)){p.pop();continue}u=N}}}void 0===N&&v&&s.push([c,u]),m?p.pop():(r={inArray:i,index:o,keys:a,edits:s,prev:r},a=(i=Array.isArray(u))?u:null!==(A=n[u.kind])&&void 0!==A?A:[],o=-1,s=[],l&&d.push(l),l=u)}while(void 0!==r);return 0!==s.length&&(f=s[s.length-1][1]),f}(e,{leave:rt})}var rt={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return at(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=st("(",at(e.variableDefinitions,", "),")"),i=at(e.directives," "),a=e.selectionSet;return n||i||r||"query"!==t?at([t,at([n,r]),i,a]," "):a},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+st(" = ",r)+st(" ",at(i," "))},SelectionSet:function(e){return ot(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,a=e.selectionSet,o=st("",t,": ")+n,s=o+st("(",at(r,", "),")")
;return s.length>80&&(s=o+st("(\n",ut(at(r,"\n")),"\n)")),at([s,at(i," "),a]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+st(" ",at(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return at(["...",st("on ",t),at(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,a=e.selectionSet;return"fragment ".concat(t).concat(st("(",at(r,", "),")")," ")+"on ".concat(n," ").concat(st("",at(i," ")," "))+a},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],a='"'===e[e.length-1],o="\\"===e[e.length-1],s=!r||a||o||n,u="";return!s||r&&i||(u+="\n"+t),
u+=t?e.replace(/\n/g,"\n"+t):e,s&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+at(e.values,", ")+"]"},ObjectValue:function(e){return"{"+at(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+st("(",at(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:it((function(e){var t=e.directives,n=e.operationTypes;return at(["schema",at(t," "),ot(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:it((function(e){return at(["scalar",e.name,at(e.directives," ")]," ")})),ObjectTypeDefinition:it((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields
;return at(["type",t,st("implements ",at(n," & ")),at(r," "),ot(i)]," ")})),FieldDefinition:it((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(lt(n)?st("(\n",ut(at(n,"\n")),"\n)"):st("(",at(n,", "),")"))+": "+r+st(" ",at(i," "))})),InputValueDefinition:it((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return at([t+": "+n,st("= ",r),at(i," ")]," ")})),InterfaceTypeDefinition:it((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return at(["interface",t,st("implements ",at(n," & ")),at(r," "),ot(i)]," ")})),UnionTypeDefinition:it((function(e){var t=e.name,n=e.directives,r=e.types;return at(["union",t,at(n," "),r&&0!==r.length?"= "+at(r," | "):""]," ")})),EnumTypeDefinition:it((function(e){var t=e.name,n=e.directives,r=e.values;return at(["enum",t,at(n," "),ot(r)]," ")})),EnumValueDefinition:it((function(e){return at([e.name,at(e.directives," ")]," ")})),InputObjectTypeDefinition:it((function(e){
var t=e.name,n=e.directives,r=e.fields;return at(["input",t,at(n," "),ot(r)]," ")})),DirectiveDefinition:it((function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(lt(n)?st("(\n",ut(at(n,"\n")),"\n)"):st("(",at(n,", "),")"))+(r?" repeatable":"")+" on "+at(i," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return at(["extend schema",at(t," "),ot(n)]," ")},ScalarTypeExtension:function(e){return at(["extend scalar",e.name,at(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return at(["extend type",t,st("implements ",at(n," & ")),at(r," "),ot(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return at(["extend interface",t,st("implements ",at(n," & ")),at(r," "),ot(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types
;return at(["extend union",t,at(n," "),r&&0!==r.length?"= "+at(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return at(["extend enum",t,at(n," "),ot(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return at(["extend input",t,at(n," "),ot(r)]," ")}};function it(e){return function(t){return at([t.description,e(t)],"\n")}}function at(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function ot(e){return st("{\n",ut(at(e,"\n")),"\n}")}function st(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function ut(e){return st("  ",e.replace(/\n/g,"\n  "))}function ct(e){return-1!==e.indexOf("\n")}function lt(e){return null!=e&&e.some(ct)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
;t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"appInstallationTask"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appInstallationTask"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{
kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:293,source:{body:"mutation ecosystemCloudAppInstall($input: AppInstallationInput!) {\n  installApp(input: $input) {\n    success\n    message\n    installationId\n    taskId\n    errors {\n      message\n    }\n    statusCode\n  }\n}\n\nquery appInstallationTask($id: ID!) {\n  appInstallationTask(id: $id) {\n    state\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},mt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ecosystemCloudAppInstall"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationInput"}}},directives:[]}],directives:[],selectionSet:{
kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"installApp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"taskId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"statusCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:293,source:{
body:"mutation ecosystemCloudAppInstall($input: AppInstallationInput!) {\n  installApp(input: $input) {\n    success\n    message\n    installationId\n    taskId\n    errors {\n      message\n    }\n    statusCode\n  }\n}\n\nquery appInstallationTask($id: ID!) {\n  appInstallationTask(id: $id) {\n    state\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},vt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEcosystemCloudAppInstallation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contextIds"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{
kind:"Variable",name:{kind:"Name",value:"environmentType"}},type:{kind:"NamedType",name:{kind:"Name",value:"AppEnvironmentType"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extensionContexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contextIds"},value:{kind:"Variable",name:{kind:"Name",value:"contextIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"appId"},value:{kind:"Variable",name:{kind:"Name",value:"appId"}}},{kind:"ObjectField",name:{kind:"Name",value:"environmentType"},value:{kind:"Variable",name:{kind:"Name",value:"environmentType"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{
kind:"FragmentSpread",name:{kind:"Name",value:"extensionContextsNodes"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"extensionContextsNodes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appEnvironmentVersion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLatest"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceApp"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{
kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{
kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"license"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEntitlementNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trialEndDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],
directives:[]}]}}]}}],loc:{start:0,end:1365,source:{
body:"query getEcosystemCloudAppInstallations($context: ID!, $after: String) {\n  extensionContexts(contextIds: [$context]) {\n    id\n    installations(after: $after) {\n      ...extensionContextsNodes\n      ...pageInfo\n    }\n  }\n}\n\nquery getEcosystemCloudAppInstallation(\n  $contextIds: [ID!]!\n  $appId: ID!\n  $environmentType: AppEnvironmentType\n) {\n  extensionContexts(contextIds: $contextIds) {\n    id\n    installations(filter: { appId: $appId, environmentType: $environmentType }) {\n      ...extensionContextsNodes\n    }\n  }\n}\n\nfragment extensionContextsNodes on AppInstallationConnection {\n  nodes {\n    id\n    appEnvironmentVersion {\n      isLatest\n    }\n    app {\n      marketplaceApp {\n        appKey\n        name\n        tagline\n        createdAt\n        versions {\n          edges {\n            node {\n              paymentModel\n              deployment {\n                ... on MarketplaceCloudAppDeployment {\n                  cloudAppId\n                  scopes {\n                    id\n                    name\n                    capability\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    license {\n      active\n      type\n      supportEntitlementNumber\n      trialEndDate\n    }\n    createdAt\n  }\n}\n\nfragment pageInfo on AppInstallationConnection {\n  pageInfo {\n    hasNextPage\n    endCursor\n  }\n}\n",
name:"GraphQL request",locationOffset:{line:1,column:1}}}},yt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEcosystemCloudAppInstallations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extensionContexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contextIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"context"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{
kind:"Name",value:"installations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extensionContextsNodes"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"pageInfo"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"extensionContextsNodes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appEnvironmentVersion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLatest"},arguments:[],
directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceApp"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],
directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"license"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",
value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEntitlementNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trialEndDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"pageInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1365,source:{
body:"query getEcosystemCloudAppInstallations($context: ID!, $after: String) {\n  extensionContexts(contextIds: [$context]) {\n    id\n    installations(after: $after) {\n      ...extensionContextsNodes\n      ...pageInfo\n    }\n  }\n}\n\nquery getEcosystemCloudAppInstallation(\n  $contextIds: [ID!]!\n  $appId: ID!\n  $environmentType: AppEnvironmentType\n) {\n  extensionContexts(contextIds: $contextIds) {\n    id\n    installations(filter: { appId: $appId, environmentType: $environmentType }) {\n      ...extensionContextsNodes\n    }\n  }\n}\n\nfragment extensionContextsNodes on AppInstallationConnection {\n  nodes {\n    id\n    appEnvironmentVersion {\n      isLatest\n    }\n    app {\n      marketplaceApp {\n        appKey\n        name\n        tagline\n        createdAt\n        versions {\n          edges {\n            node {\n              paymentModel\n              deployment {\n                ... on MarketplaceCloudAppDeployment {\n                  cloudAppId\n                  scopes {\n                    id\n                    name\n                    capability\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    license {\n      active\n      type\n      supportEntitlementNumber\n      trialEndDate\n    }\n    createdAt\n  }\n}\n\nfragment pageInfo on AppInstallationConnection {\n  pageInfo {\n    hasNextPage\n    endCursor\n  }\n}\n",
name:"GraphQL request",locationOffset:{line:1,column:1}}}},ht={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMarketplaceAUSIAppByKey"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceAppByKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"appKey"},value:{kind:"Variable",name:{kind:"Name",value:"appKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIApp"},directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"productHostingOptions"},value:{
kind:"ListValue",values:[{kind:"EnumValue",value:"CLOUD"}]}}]}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIAppVersion"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIApp"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceApp"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",
value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"privacyPolicyUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"logo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIAppLogo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"partner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIAppPartner"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIAppVersion"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceAppVersion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"learnMoreUrl"},arguments:[],directives:[]},{
kind:"Field",name:{kind:"Name",value:"endUserLicenseAgreementUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceConnectAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cloudAppVersionId"},
arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIAppLogo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceListingImage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"original"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"highResolution"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}
},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIAppPartner"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplacePartner"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"partnerType"},arguments:[],directives:[]}]}}],loc:{start:0,end:1016,source:{
body:"query GetMarketplaceAUSIAppByKey($appKey: String!) {\n  marketplaceAppByKey(appKey: $appKey) {\n    ...AUSIApp\n    versions(filter: { productHostingOptions: [CLOUD] }, first: 1) {\n      edges {\n        node {\n          ...AUSIAppVersion\n        }\n      }\n    }\n  }\n}\n\nfragment AUSIAppPartner on MarketplacePartner {\n  name\n  id\n  slug\n  partnerType\n}\n\nfragment AUSIApp on MarketplaceApp {\n  name\n  appKey\n  appId\n  tagline\n  privacyPolicyUrl\n  createdAt\n  logo {\n    ...AUSIAppLogo\n  }\n  partner {\n    ...AUSIAppPartner\n  }\n}\n\nfragment AUSIAppLogo on MarketplaceListingImage {\n  original {\n    id\n  }\n\n  highResolution {\n    id\n  }\n}\n\nfragment AUSIAppVersion on MarketplaceAppVersion {\n  version\n  learnMoreUrl\n  endUserLicenseAgreementUrl\n  paymentModel\n  deployment {\n    ... on MarketplaceConnectAppDeployment {\n      scopes {\n        id\n      }\n    }\n\n    ... on MarketplaceCloudAppDeployment {\n      cloudAppId\n      cloudAppVersionId\n      scopes {\n        id\n        name\n        capability\n      }\n    }\n  }\n}\n",
name:"GraphQL request",locationOffset:{line:1,column:1}}}},kt=function(){var e=g()(s.a.mark((function e(t,n){var r,i,a,o,u,c,l,p,d,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt(ht),i={appKey:t},e.prev=2,e.next=5,Ct({query:r,variables:i},n);case 5:if(a=e.sent,!(o=a.data)||!o.marketplaceAppByKey){e.next=13;break}return l=o.marketplaceAppByKey,p=l.versions,d=E()(l,["versions"]),f=dt(dt({},d),{},{version:null===(u=p.edges)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.node}),e.abrupt("return",Promise.resolve(f));case 13:throw new Error("No app found for "+t);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(2),new(w("MarketplaceAppByKeyError"))({source:e.t0,appKey:t});case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,n){return e.apply(this,arguments)}}(),gt=function(){var e=g()(s.a.mark((function e(t,n,r,i,a){var o,u,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=nt(mt),
u=i.ecosystemCloudEnvKey,c={input:{installationContext:r,appId:t.ari,environmentKey:u,async:!0,versionId:n}},e.prev=3,e.next=6,Ct({query:o,variables:c},a);case 6:if((l=e.sent).data){e.next=10;break}throw new(w("MarketplaceAppByAriError"))({source:{error:"Marketplace Forge app install failed"},appKey:t.appKey});case 10:return e.abrupt("return",l.data);case 13:throw e.prev=13,e.t0=e.catch(3),new(w("MarketplaceAppByAriError"))({source:e.t0,appKey:t.appKey});case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),bt=function(){var e=g()(s.a.mark((function e(t,n){var r,i,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt(ft),i={id:t},5e3,a={retries:Pe(1,5e3),retryDelay:5e3,accept:function(e){return e.json().then((function(e){var t,n,r=null==e||null===(t=e.data)||void 0===t||null===(n=t.appInstallationTask)||void 0===n?void 0:n.state
;return"COMPLETE"===r||"FAILED"===r?Promise.resolve():Promise.reject(new Error("Request pending"))}))}},e.next=6,Ct({query:r,variables:i,options:a},n);case 6:if((o=e.sent).data){e.next=9;break}throw new Error("App Installation Task Failed");case 9:return e.abrupt("return",o.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Et=function(){var e=g()(s.a.mark((function e(t,n,r,i){var a,o,u,c,l,p,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nt(vt),o=t.ari,u={appId:o,contextIds:n,environment:r.ecosystemCloudEnvKey},e.prev=3,e.next=6,Ct({query:a,variables:u},i);case 6:if((p=e.sent).data){e.next=9;break}throw new Error("Ecosystem cloud app not installed");case 9:if(!(d=null===(c=p.data.extensionContexts)||void 0===c?void 0:c[0].installations)||null===(l=d.nodes)||void 0===l||!l.length){e.next=14;break}return e.abrupt("return",Promise.resolve(d.nodes));case 14:
throw new Error("Ecosystem cloud app not installed");case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(3),new(w("MarketplaceAppByAriError"))({source:e.t0,appKey:t.appKey});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Ot=function(){var e=g()(s.a.mark((function e(t,n){var r,i,a,o,u,c,l,p,d,f,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.product,i=t.cloudId,a=t.baseUrl,o=t.gqlGatewayUrl,u=nt(yt),c={context:"ari:cloud:".concat(r,"::site/").concat(i),after:n},e.prev=3,e.next=6,Ct({query:u,variables:c},o);case 6:if(d=e.sent,f=null===(l=d.data)||void 0===l||null===(p=l.extensionContexts)||void 0===p?void 0:p[0].installations){e.next=10;break}throw new Error("Couldnot find any installed ecosystem cloud apps");case 10:return m=Pt(a,(f.nodes||[]).filter((function(e){return e.app}))),e.abrupt("return",{installedAddons:m,hasNextPage:!!f.pageInfo.hasNextPage,
endCursor:f.pageInfo.endCursor});case 14:return e.prev=14,e.t0=e.catch(3),console.error("Failed to fetch installed Ecosystem Cloud Apps:",e.t0),e.abrupt("return",{installedAddons:[],hasNextPage:!1});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n){return e.apply(this,arguments)}}(),St=function(){var e=g()(s.a.mark((function e(t,n){var r,i,a,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:[],e.prev=1,e.next=4,Ot(t,n);case 4:if(i=e.sent,a=[].concat(c()(r),c()(i.installedAddons)),!i.hasNextPage||!i.endCursor){e.next=10;break}return e.next=9,St(t,i.endCursor,a);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}();function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It={postInstallToEcosystemCloud:function(){var e=g()(s.a.mark((function e(t,n,r,i,a,o){var u,c,l,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(t,n,a,i,o);case 2:if(u=e.sent,!(c=u.installApp)||c.success){e.next=6;break}throw new _({addon:t,code:"InstallAppFailure",message:(null===(l=c.errors)||void 0===l?void 0:l[0].message)||"Ecosystem cloud app installation failed ".concat(c.statusCode),
source:new Error(null===(p=c.errors)||void 0===p?void 0:p[0])});case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),pollEcosystemCloudAppInstallStatus:function(){var e=g()(s.a.mark((function e(t,n,r,i){var a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt(t,r);case 3:if(a=e.sent,!((o=a.appInstallationTask)&&"PENDING"===o.state||o&&"RUNNING"===o.state)){e.next=9;break}return e.abrupt("return",new _({addon:i.addon,code:"EcosystemCloudInstallPollFailure",message:"AppInstallationTask in polling response not completed, current state:".concat(o.state)}));case 9:if(!o||"COMPLETE"!==o.state){e.next=13;break}return e.abrupt("return",!0);case 13:return e.abrupt("return",new _({addon:i.addon,code:"EcosystemCloudInstallPollFailure",message:"AppInstallationTask state is failed "}));case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new _({
addon:i.addon,code:"AppInstallationTaskFailedError",message:"Failed while polling for app installation status for ".concat(i.addon.toString()),source:e.t0});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},_t=function(e){var t,n=null===(t=e.version)||void 0===t?void 0:t.deployment;return{details:{key:e.appKey,name:e.name,description:e.tagline||"",metadata:{},ecosystemCloudAppId:n.cloudAppId},preinstalled:!1,scopes:n.scopes.map((function(e){return e.capability})),metadata:void 0}},wt=function(e,t){var n,r,i,a=null===(n=t.app)||void 0===n?void 0:n.marketplaceApp,o=a&&(null===(r=a.versions.edges)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.node);if(a&&o){var s,u={key:a.appKey,name:a.name,description:a.tagline||"",metadata:void 0},c=o.deployment,l=function(e){var t={type:"free"};return"PAID_VIA_ATLASSIAN"===e.paymentModel&&(t={type:"paid",licenseType:{type:"subscription",renewalType:{isAutoRenewal:!0}}}),t
}(o),p="".concat(e,"/plugins/servlet/upm#manage/").concat(a.appKey);return{authType:{type:"2LO"},details:u,installationId:t.id,enabled:!0,manageAppUrl:p,installTime:new Date(t.createdAt),scopes:c.scopes.map((function(e){return e.capability})),latestVersion:!(null===(s=t.appEnvironmentVersion)||void 0===s||!s.isLatest),paymentModel:l,metadata:void 0}}throw new Error("Marketplace app data not present in installed app ".concat(JSON.stringify(t.id)))},Pt=function(e,t){return t.filter((function(e){var t;return null===(t=e.app)||void 0===t?void 0:t.marketplaceApp})).map((function(t){return wt(e,t)}))},Tt=function(){var e=g()(s.a.mark((function e(t,n,r){var i,a,o,u,c,l,p,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.baseUrl,o=n.gqlGatewayUrl,u=Je(n),e.next=4,kt(ve(t.appKey),o);case 4:if(c=e.sent,l=null===(i=c.version.deployment)||void 0===i?void 0:i.cloudAppVersionId){e.next=8;break}throw new _({addon:r.addon,code:"CloudVersionIdFetchError",
message:"CloudVersionId is not present for version specific installation ".concat(r.addon.toString())});case 8:return e.next=10,It.postInstallToEcosystemCloud(t,l,a,u,r.contextId,o);case 10:if(null==(p=e.sent)||!p.taskId){e.next=14;break}return e.next=14,It.pollEcosystemCloudAppInstallStatus(p.taskId,a,o,r);case 14:return e.next=16,Et(t,r.contextId,u,o);case 16:return d=e.sent,e.abrupt("return",wt(a,d[0]));case 18:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ct=function(){var e=g()(s.a.mark((function e(t,n){var r,i,a,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,i=t.variables,a=t.options,o=Nt(Nt({},void 0===a?{}:a),{},{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:r,variables:i})}),e.next=4,se(n,o);case 4:return u=e.sent,e.abrupt("return",u.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){
return e.apply(this,arguments)}}(),Dt=function(e){return{credentials:Ve(e)}},jt=function(e,t){return"".concat(e,"/rest/plugins/1.0/apps/install-subscribe/permission?addonKey=").concat(t)},Rt=function(e,t){return"".concat(e,"/rest/plugins/1.0/").concat(t,"-key")},xt=function(e,t){return"".concat(e,"/rest/plugins/1.0/").concat(t,"/marketplace")},Ft=function(e){return"".concat(e,"/rest/plugins/1.0/")};function Ut(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=g()(s.a.mark((function e(t,n){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se(Rt(t,n),Dt(t));case 3:return r=e.sent,e.next=6,r.json();case 6:return i=e.sent,e.abrupt("return",{links:{postInstall:i.links["post-install"],configure:i.links.configure,manage:i.links.manage},key:i.key});case 10:throw e.prev=10,e.t0=e.catch(0),new(w("InstalledAppFromUPMError"))({source:e.t0,appKey:n});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}
function Mt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=g()(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(jt(t,n),Dt(t));case 2:if(!((r=e.sent).status>=200&&r.status<=299)){e.next=7;break}return e.abrupt("return",Promise.resolve(!0));case 7:if(401!==r.status&&403!==r.status){e.next=11;break}return e.abrupt("return",Promise.resolve(!1));case 11:return e.abrupt("return",Promise.reject("".concat(r.status,": ").concat(r.statusText)));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vt=function(){var e=g()(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se(xt(t,n),Dt(t));case 3:return r=e.sent,e.abrupt("return",r.json());case 7:throw e.prev=7,e.t0=e.catch(0),new(w("InstalledMarketplaePluginUPMError"))({source:e.t0,appKey:n});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){
return e.apply(this,arguments)}}(),Gt=function(e,t){return se(function(e,t){return"".concat(e,"/rest/plugins/1.0/available/").concat(t,"-key")}(e,t),Dt(e)).then((function(e){return e.json()}))},Kt=function(e){return se(function(e){return"".concat(e,"/rest/plugins/1.0/installed-marketplace")}(e),Dt(e)).then((function(e){return e.json()}))};function qt(e){return zt.apply(this,arguments)}function zt(){return(zt=g()(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(Ft(t),Dt(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.plugins.filter((function(e){return(e.userInstalled||e.usesLicensing)&&"Embedded Marketplace"!==e.name})).map((function(e){return{links:{postInstall:e.links["post-install"],configure:e.links.configure,manage:e.links.manage},key:e.key}})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jt,Wt=function(e){return se(function(e){
return"".concat(e,"/rest/plugins/1.0/host-status")}(e),Dt(e)).then((function(e){return e.json()}))},Ht=function(e){return e.remoteInstallable||e.preinstalled};function $t(e,t,n,r){return Yt.apply(this,arguments)}function Yt(){return(Yt=g()(s.a.mark((function e(t,n,r,i){var a,o,u,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([kt(ve(t.key),i),Ut(r,t.key),Vt(r,t.key)]);case 2:return a=e.sent,o=p()(a,3),u=o[0],c=o[1],l=o[2],e.abrupt("return",Ue(u,c,l,n).fold((function(e){return Promise.reject(e)}),(function(e){return e})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e,t,n){return t.map((function(e){return kt(e.key,n).catch((function(e){return e}))}))}function Xt(e,t,n){return Zt.apply(this,arguments)}function Zt(){return(Zt=g()(s.a.mark((function e(t,n,r){var i,a,o,u,l,d,f,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([qt(n),Kt(n)]);case 2:return i=e.sent,
a=p()(i,2),o=a[0],u=a[1],e.next=8,Promise.all(Qt(0,o,r));case 8:return l=e.sent,d=Ge(u.plugins,(function(e){return e.key})),f=Ge(l,(function(e){return e.appKey})),m=o.reduce((function(e,n){var r=d[n.key],i=f[n.key];return i&&r?[].concat(c()(e),c()(Ue(i,n,r,t).map((function(e){return[e]})).getOrElse([]))):(console.error("Marketplace API or Installed Marketplace API didn't return a response for ".concat(n.key)),e)}),[]),e.abrupt("return",m);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var en,tn,nn=(Jt=function(){function e(t){f()(this,e),a()(this,"config",void 0),a()(this,"upmBaseUrl",void 0),this.config=t,this.upmBaseUrl=this.config.baseUrl}return v()(e,[{key:"getInstalledAddons",value:function(){var e=g()(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Je(this.config),r=Xt(n,this.upmBaseUrl,this.config.gqlGatewayUrl),i=St(this.config),e.abrupt("return",Promise.allSettled([r,i]).then((function(e){
var t=p()(e,2),n=t[0],r=t[1],i="fulfilled"===n.status?n.value:[],a="fulfilled"===r.status?r.value:[],o=[].concat(c()(i),c()(a));return{values:o,totalCount:o.length,pageSize:o.length}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uninstallAddon",value:function(e){return Promise.reject()}},{key:"installAddon",value:function(){var e=g()(s.a.mark((function e(t){var n,r,i,a,o,u=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=g()(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new _({message:"Marketplace SPI function [InstallAddon with InstallByUrl] not implemented",addon:t.addon,code:"MethodNotImplementedError"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e){return a.apply(this,arguments)},n={getTokenFromUPM:function(){var e=g()(s.a.mark((function e(){return s.a.wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Se(u.upmBaseUrl);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new _({addon:t.addon,code:"UPMTokenFetchError",message:"Fetching token from UPM failed for ".concat(t.addon.toString()),source:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),postInstallToUPM:function(){var e=g()(s.a.mark((function e(n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne(u.upmBaseUrl,n,r);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new _({addon:t.addon,code:e.t0.subCode||e.t0.contentType||"UnknownUPMInstallSubscribeError",message:e.t0.errorMessage,source:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),waitForPendingUPMTask:function(){var e=g()(s.a.mark((function e(n){return s.a.wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te(u.upmBaseUrl,n.links.self,n.pingAfter);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new _({addon:t.addon,code:e.t0.subCode||"UPMInstallPostError",message:e.t0.errorMessage||"Failed while polling for app installation status for ".concat(t.addon.toString()),source:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getInstalledAddonInternal:function(){var e=g()(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Je(u.config),e.next=4,$t(n,r,u.upmBaseUrl,u.config.gqlGatewayUrl);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),new _({addon:t.addon,code:"FetchAddonInternalError",message:"Failed while constructing a app object post installation success for ".concat(t.addon.toString()),source:e.t0});case 10:case"end":return e.stop()}
}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},r=function(){var e=g()(s.a.mark((function e(t){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getTokenFromUPM();case 2:return r=e.sent,e.next=5,n.postInstallToUPM(r,t.key);case 5:return i=e.sent,e.next=8,n.waitForPendingUPMTask(i);case 8:return e.abrupt("return",n.getInstalledAddonInternal(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=g()(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tt(n,u.config,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",_e(t.addon)(r,i,o));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"upgradeAddon",value:function(e){return Promise.reject()}},{key:"uninstallAddonFromSite",
value:function(e){return Promise.reject()}},{key:"createContainerToken",value:function(e){return Promise.reject()}},{key:"getInstalledAddon",value:function(e){var t=this,n=Je(this.config),r=this.config.gqlGatewayUrl;return _e(e.addon)(function(){var e=g()(s.a.mark((function e(i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$t(i,n,t.upmBaseUrl,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject("Marketplace SPI function [getInstalledAddon with InstallByUrl] not implemented")}),function(){var i=g()(s.a.mark((function i(a){var o;return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Et(a,e.contextId,n,r);case 2:return o=i.sent,i.abrupt("return",wt(t.upmBaseUrl,o[0]));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},{key:"getInstallableAddon",value:function(e){var t=this
;return _e(e.addon)(function(){var e=g()(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt(t.upmBaseUrl,n.key);case 2:return r=e.sent,e.abrupt("return",Ht(r)?xe(r):Promise.reject("Requested add-on is not installable"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject("Marketplace SPI function [getInstallableAddon with InstallByUrl] not implemented")}),function(){var e=g()(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(ve(n.appKey),t.config.gqlGatewayUrl);case 2:return r=e.sent,e.abrupt("return",_t(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"rotateContainerToken",value:function(e){return Promise.reject()}}]),e}(),
h()(Jt.prototype,"getInstalledAddons",[ge,Ee],Object.getOwnPropertyDescriptor(Jt.prototype,"getInstalledAddons"),Jt.prototype),h()(Jt.prototype,"uninstallAddon",[ge,Ee,be],Object.getOwnPropertyDescriptor(Jt.prototype,"uninstallAddon"),Jt.prototype),h()(Jt.prototype,"installAddon",[ge,Ee,function(e,t,n){var r=n.value,i=function(e){return Promise.resolve(e)==e};return n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=r.apply(this,t);return i(a)?a.then((function(e){return e})).catch((function(e){throw e.toJSON?e.toJSON():e})):a},n}],Object.getOwnPropertyDescriptor(Jt.prototype,"installAddon"),Jt.prototype),h()(Jt.prototype,"upgradeAddon",[ge,Ee,be],Object.getOwnPropertyDescriptor(Jt.prototype,"upgradeAddon"),Jt.prototype),h()(Jt.prototype,"uninstallAddonFromSite",[ge,Ee,be],Object.getOwnPropertyDescriptor(Jt.prototype,"uninstallAddonFromSite"),Jt.prototype),
h()(Jt.prototype,"createContainerToken",[ge,Ee,be],Object.getOwnPropertyDescriptor(Jt.prototype,"createContainerToken"),Jt.prototype),h()(Jt.prototype,"getInstalledAddon",[ge,Ee],Object.getOwnPropertyDescriptor(Jt.prototype,"getInstalledAddon"),Jt.prototype),h()(Jt.prototype,"getInstallableAddon",[ge,Ee],Object.getOwnPropertyDescriptor(Jt.prototype,"getInstallableAddon"),Jt.prototype),h()(Jt.prototype,"rotateContainerToken",[ge,Ee,be],Object.getOwnPropertyDescriptor(Jt.prototype,"rotateContainerToken"),Jt.prototype),Jt),rn=(en=function(){function e(t){f()(this,e),a()(this,"config",void 0),this.config=t}return v()(e,[{key:"getMostRecentContext",value:function(){return Promise.reject()}},{key:"getContextInstallationForInstalledAddonContext",value:function(e){return Promise.reject()}},{key:"getContextInstallationsForInstalledAddon",value:function(e){return Promise.reject()}},{key:"getContext",value:function(e){return Promise.reject()}},{key:"getContexts",value:function(e){
return Promise.reject()}}]),e}(),h()(en.prototype,"getMostRecentContext",[ge,Ee,be],Object.getOwnPropertyDescriptor(en.prototype,"getMostRecentContext"),en.prototype),h()(en.prototype,"getContextInstallationForInstalledAddonContext",[ge,Ee,be],Object.getOwnPropertyDescriptor(en.prototype,"getContextInstallationForInstalledAddonContext"),en.prototype),h()(en.prototype,"getContextInstallationsForInstalledAddon",[ge,Ee,be],Object.getOwnPropertyDescriptor(en.prototype,"getContextInstallationsForInstalledAddon"),en.prototype),h()(en.prototype,"getContext",[ge,Ee,be],Object.getOwnPropertyDescriptor(en.prototype,"getContext"),en.prototype),h()(en.prototype,"getContexts",[ge,Ee,be],Object.getOwnPropertyDescriptor(en.prototype,"getContexts"),en.prototype),en);function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=(tn=function(){function e(t){f()(this,e),a()(this,"config",void 0),this.config=t}return v()(e,[{key:"getHostInfo",value:function(){return Promise.resolve(on(on({supports:pe,product:this.config.product},this.config.subproduct?{subproduct:this.config.subproduct}:{}),{},{baseUrl:this.config.baseUrl,globalContext:ke(this.config)}))}},{key:"getHostPricingInfo",value:function(){var e=g()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(this.config.baseUrl);case 2:return t=e.sent,e.abrupt("return",{evaluation:t.hostLicense.evaluation,currentLicensedUsers:t.upmLicensedHostUsers,
renewalType:t.hostLicense.autoRenewal?"auto":"quote",maximumLicensedUsers:t.hostLicense.maximumNumberOfUsers,billingCurrency:t.billingCurrency,subscriptionPeriod:Object.prototype.hasOwnProperty.call(t.hostLicense,"subscriptionAnnual")?t.hostLicense.subscriptionAnnual?"annual":"monthly":"annual"});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),h()(tn.prototype,"getHostInfo",[ge,Ee],Object.getOwnPropertyDescriptor(tn.prototype,"getHostInfo"),tn.prototype),h()(tn.prototype,"getHostPricingInfo",[ge,Ee],Object.getOwnPropertyDescriptor(tn.prototype,"getHostPricingInfo"),tn.prototype),tn),un=Object.freeze({JIRA:"jira",CONFLUENCE:"confluence"}),cn=Object.freeze({CAN_INSTALL_FREE_AND_PAID:"CAN_INSTALL_FREE_AND_PAID",CAN_INSTALL_FREE_ONLY:"CAN_INSTALL_FREE_ONLY",CANNOT_INSTALL:"CANNOT_INSTALL"}),ln=Object.freeze({HIPCHAT:"hipchat.cloud",JIRA_CORE:"jira-core.ondemand",JIRA_SERVICE_DESK:"jira-servicedesk.ondemand",
JIRA_SOFTWARE:"jira-software.ondemand",CONFLUENCE:"confluence.ondemand"}),pn=Object.freeze({UNAUTHORIZED:"UNAUTHORIZED_ERROR",UNKNOWN:"UNKNOWN_ERROR"}),dn=Object.freeze({ADD_PRODUCTS:"add-products",ADD_PRODUCT:"addProduct",INVITE_USERS:"invite-users",MANAGE:"manage",WRITE:"write"}),fn=r("./node_modules/ky/index.js");function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yn,hn=function(e,t){var n=function(e,t){
return new Function("return function (call) { \n         return function ".concat(e,"() { \n           return call(this, arguments) \n         }; \n      };"))()(Function.apply.bind(t))}(e,(function(r){var i=this,a=t?t(r):r,o=a.code,s=a.message,u=a.meta,c=a.source,l=E()(a,["code","message","meta","source"]);this.code=o,this.message=s,this.id=S()(9),this.type=e,this.source=c,this.meta=vn(vn({},u),l),this.toJSON=function(){return vn({id:i.id,code:i.code,type:i.type,message:i.message,meta:i.meta},i.source&&{source:i.source.toJSON?i.source.toJSON():i.source.message?i.source.message:i.source})},this.toString=JSON.stringify(this.toJSON()),Object.prototype.hasOwnProperty.call(Error,"captureStackTrace")?Error.captureStackTrace(this,n):this.stack=new Error(s).stack}));return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n.prototype,Error.prototype):n.prototype=Object.create(Error.prototype,{constructor:{value:n}}),n};function kn(e){return gn.apply(this,arguments)}function gn(){
return(gn=g()(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response){e.next=18;break}return e.prev=1,e.next=4,t.response.json();case 4:r=e.sent,e.next=18;break;case 7:return e.prev=7,e.t0=e.catch(1),e.prev=9,e.next=12,t.response.text();case 12:r=e.sent,e.next=18;break;case 15:e.prev=15,e.t1=e.catch(9),console.error("parseError: failed to parse response",t);case 18:return e.abrupt("return",{status:null===(n=t.response)||void 0===n?void 0:n.status,response:r});case 19:case"end":return e.stop()}}),e,null,[[1,7],[9,15]])})))).apply(this,arguments)}function bn(e){var t=e.name,n=e.code,r=e.response;return new(hn(t))({code:n,message:"".concat(t," error"),meta:{response:r}})}var En=(yn={},a()(yn,un.JIRA,[ln.JIRA_CORE,ln.JIRA_SERVICE_DESK,ln.JIRA_SOFTWARE]),a()(yn,un.CONFLUENCE,[ln.CONFLUENCE]),yn),On=function(e){return e.flatMap((function(e){return En[e]})).filter((function(e){return!!e}))},Sn=function(e){var t=new Set
;return e.forEach((function(e){var n=function(e){return Object.keys(En).find((function(t){return En[t].includes(e)}))}(e);n&&t.add(n)})),c()(t)};function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var In,_n,wn=function(){function e(t){f()(this,e),a()(this,"_api",void 0),a()(this,"marketplace",function(e){return{appInstallPermission:function(t,n){return g()(s.a.mark((function r(){var i,a,o,u,c,l;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:
return i=e.permitted(dn.MANAGE,"ari:cloud:".concat(t,"::site/").concat(n)),a=e.permitted(dn.MANAGE,"ari:cloud:platform::site/".concat(n)),r.next=4,Promise.all([i,a]);case 4:return o=r.sent,u=p()(o,2),c=u[0],l=u[1],r.abrupt("return",l.permitted?cn.CAN_INSTALL_FREE_AND_PAID:c.permitted?cn.CAN_INSTALL_FREE_ONLY:cn.CANNOT_INSTALL);case 9:case"end":return r.stop()}}),r)})))()},availableSites:function(t){return g()(s.a.mark((function n(){var r,i,a,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=On(t),n.next=3,e.availableSites(r);case 3:return i=n.sent,a=i.sites,o=a.map((function(e){return Nn(Nn({},e),{},{products:Sn(e.products)})})),n.abrupt("return",{sites:o});case 7:case"end":return n.stop()}}),n)})))()}}}(this)),this._api=fn.a.create({prefixUrl:t})}return v()(e,[{key:"availableSites",value:function(){var e=g()(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,
this._api.post("available-sites",{json:{products:t}}).json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,kn(e.t0);case 10:throw n=e.sent,r=n.status,i=n.response,bn({name:"AvailableSitesError",code:401===r?pn.UNAUTHORIZED:pn.UNKNOWN,response:i});case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"permitted",value:function(){var e=g()(s.a.mark((function e(t,n){var r,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._api.post("permissions/permitted",{json:{permissionId:t,resourceId:n}}).json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,kn(e.t0);case 10:throw r=e.sent,i=r.status,a=r.response,bn({name:"PermittedError",code:401===i?pn.UNAUTHORIZED:pn.UNKNOWN,response:a});case 14:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e
}(),Pn=(Object.freeze({Active:"active",Inactive:"inactive",Closed:"closed"}),Object.freeze({Site:"SITE",Project:"PROJECT",Space:"SPACE"}),Object.freeze({And:"AND",Or:"OR"}),Object.freeze({Issue:"ISSUE",Page:"PAGE",Blogpost:"BLOGPOST"}),Object.freeze({Assigned:"ASSIGNED",Unassigned:"UNASSIGNED",Viewed:"VIEWED",Commented:"COMMENTED",Updated:"UPDATED",Created:"CREATED",Liked:"LIKED",Transitioned:"TRANSITIONED",Published:"PUBLISHED",Edited:"EDITED"}),Object.freeze({Site:"SITE",Project:"PROJECT",Issue:"ISSUE",Comment:"COMMENT",Space:"SPACE",Page:"PAGE",Blogpost:"BLOGPOST",Task:"TASK"}),Object.freeze({Jira:"JIRA",JiraBusiness:"JIRA_BUSINESS",JiraSoftware:"JIRA_SOFTWARE",JiraOps:"JIRA_OPS",JiraServiceDesk:"JIRA_SERVICE_DESK",Confluence:"CONFLUENCE"}),Object.freeze({Devops:"DEVOPS"}),Object.freeze({Info:"INFO",Warning:"WARNING",Error:"ERROR"}),Object.freeze({InProgress:"IN_PROGRESS",Done:"DONE",Failed:"FAILED"}),Object.freeze({Started:"STARTED",Done:"DONE",Failed:"FAILED"}),Object.freeze({
Development:"DEVELOPMENT",Staging:"STAGING",Production:"PRODUCTION"}),Object.freeze({Navigation:"NAVIGATION",Images:"IMAGES",Media:"MEDIA",Scripts:"SCRIPTS",FetchBackendSide:"FETCH_BACKEND_SIDE",FetchClientSide:"FETCH_CLIENT_SIDE"}),Object.freeze({Navigation:"NAVIGATION",Images:"IMAGES",Media:"MEDIA",Scripts:"SCRIPTS",FetchBackendSide:"FETCH_BACKEND_SIDE",FetchClientSide:"FETCH_CLIENT_SIDE"}),Object.freeze({Scripts:"SCRIPTS",Styles:"STYLES"}),Object.freeze({Scripts:"SCRIPTS",Styles:"STYLES"}),Object.freeze({StartsWith:"STARTS_WITH"}),Object.freeze({Pending:"PENDING",Running:"RUNNING",Complete:"COMPLETE",Failed:"FAILED"}),Object.freeze({Cloud:"CLOUD",Server:"SERVER",DataCenter:"DATA_CENTER"}),Object.freeze({Enabled:"ENABLED",Disabled:"DISABLED",ComingSoon:"COMING_SOON"}),Object.freeze({Enabled:"ENABLED",Disabled:"DISABLED"}),Object.freeze({Key:"KEY",Summary:"SUMMARY",Description:"DESCRIPTION",Implementations:"IMPLEMENTATIONS",Supports:"SUPPORTS"}),Object.freeze({Pending:"PENDING",
InProgress:"IN_PROGRESS",Successful:"SUCCESSFUL",Cancelled:"CANCELLED",Failed:"FAILED",RolledBack:"ROLLED_BACK",Unknown:"UNKNOWN"}),Object.freeze({Production:"PRODUCTION",Staging:"STAGING",Testing:"TESTING",Development:"DEVELOPMENT",Unmapped:"UNMAPPED"}),Object.freeze({JiraSoftware:"JIRA_SOFTWARE",JiraServicedesk:"JIRA_SERVICEDESK",JiraCore:"JIRA_CORE"}),Object.freeze({CommitToPr:"COMMIT_TO_PR",CommitToDeployment:"COMMIT_TO_DEPLOYMENT"}),Object.freeze({Hour:"HOUR",Day:"DAY",Week:"WEEK"}),Object.freeze({Explicit:"EXPLICIT",Implicit:"IMPLICIT"}),Object.freeze({Explicit:"EXPLICIT",Implicit:"IMPLICIT",All:"ALL"}),Object.freeze({BitbucketCloud:"BITBUCKET_CLOUD",ThirdParty:"THIRD_PARTY",All:"ALL"}),Object.freeze({Default:"DEFAULT",ChangeManagement:"CHANGE_MANAGEMENT"}),Object.freeze({LastInferredAt:"LAST_INFERRED_AT"}),Object.freeze({DependsOn:"DEPENDS_ON",Contains:"CONTAINS"}),Object.freeze({PrOpen:"PR_OPEN",PrMerged:"PR_MERGED",PrDeclined:"PR_DECLINED",BranchOpen:"BRANCH_OPEN",
Commit:"COMMIT"}),Object.freeze({All:"ALL",Completed:"COMPLETED",Incomplete:"INCOMPLETE"}),Object.freeze({Frontend:"FRONTEND",Manual:"MANUAL",Product:"PRODUCT",Web:"WEB"}),Object.freeze({Jira:"JIRA",JiraServicedesk:"JIRA_SERVICEDESK",Confluence:"CONFLUENCE"}),Object.freeze({Added:"ADDED",Deleted:"DELETED",Copied:"COPIED",Moved:"MOVED",Modify:"MODIFY",Unknown:"UNKNOWN"}),Object.freeze({Production:"PRODUCTION",Staging:"STAGING",Testing:"TESTING",Development:"DEVELOPMENT",Unmapped:"UNMAPPED"}),Object.freeze({Pending:"PENDING",InProgress:"IN_PROGRESS",Successful:"SUCCESSFUL",Cancelled:"CANCELLED",Failed:"FAILED",RolledBack:"ROLLED_BACK",Unknown:"UNKNOWN"}),Object.freeze({Open:"OPEN",Merged:"MERGED",Declined:"DECLINED"}),Object.freeze({LastInferredAt:"LAST_INFERRED_AT"}),Object.freeze({Name:"NAME",Key:"KEY",Lead:"LEAD",Category:"CATEGORY"}),Object.freeze({ServiceDesk:"SERVICE_DESK",Business:"BUSINESS",Software:"SOFTWARE"}),Object.freeze({Released:"RELEASED",
ReleasedAndUnreleased:"RELEASED_AND_UNRELEASED"}),Object.freeze({Released:"RELEASED",Unreleased:"UNRELEASED",ReleasedAndUnreleased:"RELEASED_AND_UNRELEASED"}),Object.freeze({Active:"ACTIVE",Inactive:"INACTIVE",Trial:"TRIAL"}),Object.freeze({Free:"FREE",PaidViaPartner:"PAID_VIA_PARTNER",PaidViaAtlassian:"PAID_VIA_ATLASSIAN"})),Tn=(Object.freeze({Private:"PRIVATE",Public:"PUBLIC"}),Object.freeze({Approved:"APPROVED",Rejected:"REJECTED",NotAParticipant:"NOT_A_PARTICIPANT"}),Object.freeze({Private:"PRIVATE",Public:"PUBLIC",Submitted:"SUBMITTED",ReadyToLaunch:"READY_TO_LAUNCH",Rejected:"REJECTED"}),Object.freeze({Website:"WEBSITE",InProduct:"IN_PRODUCT"}),Object.freeze({OneTime:"ONE_TIME",Annual:"ANNUAL"}),Object.freeze({AtlassianInternal:"ATLASSIAN_INTERNAL"}),Object.freeze({PolarisIdeaStringField:"PolarisIdeaStringField",PolarisIdeaDateTimeField:"PolarisIdeaDateTimeField",PolarisIdeaDateField:"PolarisIdeaDateField",PolarisIdeaUserField:"PolarisIdeaUserField",
PolarisIdeaUsersField:"PolarisIdeaUsersField",PolarisIdeaOptionField:"PolarisIdeaOptionField",PolarisIdeaOptionsField:"PolarisIdeaOptionsField",PolarisIdeaLabelsField:"PolarisIdeaLabelsField",PolarisIdeaNumberField:"PolarisIdeaNumberField"}),Object.freeze({NeedAuth:"NEED_AUTH",InvalidSnippet:"INVALID_SNIPPET",NotFound:"NOT_FOUND",InternalError:"INTERNAL_ERROR"}),Object.freeze({Oauth2:"OAUTH2",ApiKey:"API_KEY"}),Object.freeze({Number:"NUMBER",Rating:"RATING",Labels:"LABELS"}),Object.freeze({Asc:"ASC",Desc:"DESC"}),Object.freeze({Gt:"GT",Lt:"LT",Gte:"GTE",Lte:"LTE",Eq:"EQ"}),Object.freeze({FieldIdentity:"FIELD_IDENTITY",FieldNumeric:"FIELD_NUMERIC",Text:"TEXT"}),Object.freeze({Lt:"LT",Lte:"LTE",Gt:"GT",Gte:"GTE",Eq:"EQ",Neq:"NEQ"}),Object.freeze({Capture:"CAPTURE",Prioritize:"PRIORITIZE",Deliver:"DELIVER",Custom:"CUSTOM"}),Object.freeze({Table:"TABLE",Board:"BOARD",Twoxtwo:"TWOXTWO"}),Object.freeze({Jira:"Jira",Confluence:"Confluence"}),Object.freeze({Purple:"PURPLE",Blue:"BLUE",
Green:"GREEN",Teal:"TEAL",Yellow:"YELLOW",Orange:"ORANGE",Grey:"GREY",DarkPurple:"DARK_PURPLE",DarkBlue:"DARK_BLUE",DarkGreen:"DARK_GREEN",DarkTeal:"DARK_TEAL",DarkYellow:"DARK_YELLOW",DarkOrange:"DARK_ORANGE",DarkGrey:"DARK_GREY"}),Object.freeze({Closed:"CLOSED",Active:"ACTIVE",Future:"FUTURE"}),Object.freeze({Weeks:"WEEKS",Months:"MONTHS",Quarters:"QUARTERS"}),Object.freeze({Released:"RELEASED",Unreleased:"UNRELEASED",Archived:"ARCHIVED"}),Object.freeze({ManageOrg:"MANAGE_ORG",AuthConfluenceUser:"AUTH_CONFLUENCE_USER",ManageDirectory:"MANAGE_DIRECTORY",ReadMe:"READ_ME",ViewUserprofile:"VIEW_USERPROFILE",IdentityAtlassianExternal:"IDENTITY_ATLASSIAN_EXTERNAL",ConfluenceAtlassianExternal:"CONFLUENCE_ATLASSIAN_EXTERNAL",ReadConfluenceContentAll:"READ_CONFLUENCE_CONTENT_ALL",ReadConfluenceContentSummary:"READ_CONFLUENCE_CONTENT_SUMMARY",WriteConfluenceContent:"WRITE_CONFLUENCE_CONTENT",ReadConfluenceSpaceSummary:"READ_CONFLUENCE_SPACE_SUMMARY",
WriteConfluenceSpace:"WRITE_CONFLUENCE_SPACE",WriteConfluenceFile:"WRITE_CONFLUENCE_FILE",ReadConfluenceProps:"READ_CONFLUENCE_PROPS",WriteConfluenceProps:"WRITE_CONFLUENCE_PROPS",SearchConfluence:"SEARCH_CONFLUENCE_",ManageConfluenceConfiguration:"MANAGE_CONFLUENCE_CONFIGURATION",ReadConfluenceGroups:"READ_CONFLUENCE_GROUPS",WriteConfluenceGroups:"WRITE_CONFLUENCE_GROUPS",ReadConfluenceUser:"READ_CONFLUENCE_USER",ReadConfluenceContentPermission:"READ_CONFLUENCE_CONTENT_PERMISSION",ManageApp:"MANAGE_APP",StorageApp:"STORAGE_APP",ReadJiraUser:"READ_JIRA_USER",ReadJiraWork:"READ_JIRA_WORK",WriteJiraWork:"WRITE_JIRA_WORK",ManageJiraProject:"MANAGE_JIRA_PROJECT",ManageJiraConfiguration:"MANAGE_JIRA_CONFIGURATION",JiraAtlassianExternal:"JIRA_ATLASSIAN_EXTERNAL",ManageJiraDataProvider:"MANAGE_JIRA_DATA_PROVIDER",ReadServicedeskRequest:"READ_SERVICEDESK_REQUEST",WriteServicedeskRequest:"WRITE_SERVICEDESK_REQUEST",ManageServicedeskCustomer:"MANAGE_SERVICEDESK_CUSTOMER",
ReadNotifications:"READ_NOTIFICATIONS",WriteNotifications:"WRITE_NOTIFICATIONS",AdminContainer:"ADMIN_CONTAINER",ReadContainer:"READ_CONTAINER",WriteContainer:"WRITE_CONTAINER",MigrateConfluence:"MIGRATE_CONFLUENCE"}),Object.freeze({NewSprint:"NEW_SPRINT",Backlog:"BACKLOG",ExistingSprint:"EXISTING_SPRINT"}),Object.freeze({Asc:"ASC",Desc:"DESC"}),Object.freeze({StoryPoints:"STORY_POINTS",IssueCount:"ISSUE_COUNT",OriginalEstimate:"ORIGINAL_ESTIMATE"}),Object.freeze({Active:"ACTIVE",Future:"FUTURE",Closed:"CLOSED"}),Object.freeze({None:"NONE",Assignee:"ASSIGNEE",Issueparent:"ISSUEPARENT",Issuechildren:"ISSUECHILDREN"}),function(e){return e?{allowed:!0}:{allowed:!1,message:"No addon manage permission",key:"noAddonManagePermission"}}),Cn=function(e,t,n){var r,i=e.product;return("jira"===i||"confluence"===i)&&((null===(r=t.version)||void 0===r?void 0:r.paymentModel)===Pn.Free?n!==cn.CANNOT_INSTALL:n===cn.CAN_INSTALL_FREE_AND_PAID)},Dn=(In=function(){function e(t){f()(this,e),
a()(this,"config",void 0),this.config=t}return v()(e,[{key:"hasInstallPermission",value:function(){var e=g()(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we(t.addon)(function(){var e=g()(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(n.config.baseUrl,t.details.key);case 2:return r=e.sent,e.abrupt("return",Tn(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=g()(s.a.mark((function e(t){var r,i,a,o,u,c,l,d,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.config,i=r.product,a=r.gqlGatewayUrl,"jira"!==i&&"confluence"!==i){e.next=13;break}return o="local"===n.config.environment?"".concat(n.config.baseUrl,"/gateway/api"):"/gateway/api",e.next=5,
Promise.all([kt(ve(t.details.key),a),new wn("".concat(o,"/gateway/api")).marketplace.appInstallPermission(i,n.config.cloudId)]);case 5:return u=e.sent,c=p()(u,2),l=c[0],d=c[1],f=Cn(n.config,l,d),e.abrupt("return",Tn(f));case 13:return e.abrupt("return",Tn(!1));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasUninstallPermission",value:function(e){return Promise.reject()}}]),e}(),h()(In.prototype,"hasInstallPermission",[ge,Ee],Object.getOwnPropertyDescriptor(In.prototype,"hasInstallPermission"),In.prototype),h()(In.prototype,"hasUninstallPermission",[ge,Ee,be],Object.getOwnPropertyDescriptor(In.prototype,"hasUninstallPermission"),In.prototype),In),jn=r("./node_modules/url-parse/index.js"),Rn=r.n(jn),xn=function(e,t){return"".concat(e,"/gateway/api/marketplace").concat(t)},Fn=(_n=function(){function e(t){f()(this,e),
a()(this,"config",void 0),a()(this,"siteBaseUrl",void 0),this.config=t,this.siteBaseUrl=new Rn.a(this.config.baseUrl).origin}return v()(e,[{key:"fetchOk",value:function(){var e=g()(s.a.mark((function e(t,n){var r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se(xn(this.siteBaseUrl,t),n);case 3:return r=e.sent,e.next=6,r.json();case 6:return i=e.sent,e.abrupt("return",Promise.resolve(i));case 10:if(e.prev=10,e.t0=e.catch(0),!r||!r.ok){e.next=14;break}return e.abrupt("return",Promise.resolve({status:r.status}));case 14:return e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=g()(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ae(xn(this.siteBaseUrl,t),n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){
return e.apply(this,arguments)}}()}]),e}(),h()(_n.prototype,"fetchOk",[ge,Ee],Object.getOwnPropertyDescriptor(_n.prototype,"fetchOk"),_n.prototype),h()(_n.prototype,"fetch",[ge,Ee],Object.getOwnPropertyDescriptor(_n.prototype,"fetch"),_n.prototype),_n);function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mn=function(e){return Ln(Ln(Ln(Ln(Ln({},function(e){return Oe(new nn(e))}(e)),function(e){return Oe(new sn(e))}(e)),function(e){return Oe(new rn(e))
}(e)),function(e){return Oe(new Dn(e))}(e)),function(e){return Oe(new Fn(e))}(e))},Bn=r("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),Vn=r("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js"),Gn=r("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js");if(Object(Vn.a)("emcee-discover",!1)){const{baseUrl:e,cloudId:t,environment:n}=Object(Gn.c)();Object(Bn.a)({name:"ac/create",wrmKeys:["wrc!com.atlassian.plugins.atlassian-connect-plugin:jira-atlassian-connect-resources-v5","wrc!com.atlassian.jira.jira-atlaskit-plugin:sidebar"]}).then((()=>{const r={baseUrl:`${window.location.origin}${e}`,product:"jira",subproduct:"jira-core",cloudId:t||"",environment:n||"prod",gqlGatewayUrl:`${window.location.origin}/gateway/api/graphql`};window.define&&window.define("ac/marketplace",Mn(r))}))}const Kn=e=>{const t=document.createElement("link");t.rel="dns-prefetch",t.href=e,
document.getElementsByTagName("head")[0].appendChild(t)},{baseUrl:qn}=Object(Gn.c)();fetch(`${qn}/rest/atlassian-connect/latest/addons-baseurl`).then((e=>e.ok?e.json():{})).then((e=>e.addonBaseUrls&&e.addonBaseUrls.forEach(Kn))).catch((()=>{}))}}]);try{window.__jsEvalStop("async-connect-modules.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-connect-modules.fe40c3f5982f8ba9bd05.8.js.map